# YouTube Live PIP with Chat

YouTube Liveの動画をPIP（Picture-in-Picture）で表示しながら、チャットも別ウィンドウで確認できるChrome拡張機能です。

## 機能

- ✨ ワンクリックで動画をPIP表示 + チャットウィンドウを開く
- 🎬 ブラウザのネイティブPIP機能を使用（埋め込み制限のある動画でも動作）
- 💬 YouTubeの公式チャットポップアウトを自動で開く
- 🎯 他の作業をしながらライブ配信を視聴可能

## インストール方法

### 1. リポジトリをダウンロード

```bash
git clone <このリポジトリのURL>
cd youtube-live-pip
```

または、ZIPファイルとしてダウンロードして解凍してください。

### 2. Chrome拡張機能として読み込む

1. Google Chromeを開く
2. アドレスバーに `chrome://extensions/` を入力
3. 右上の「デベロッパーモード」を有効にする
4. 「パッケージ化されていない拡張機能を読み込む」をクリック
5. このプロジェクトのフォルダを選択

## 使い方

### 基本的な使い方

1. **YouTube Liveのページを開く**
2. **動画プレイヤーにマウスを乗せる**（コントロールバーを表示）
3. **右下の「C」マーク付きPIPボタンをクリック**

すると：
- 動画が小さな浮動ウィンドウ（PIP）で表示される
- チャットが別ウィンドウで開く

### ボタンの場所

```
[動画プレイヤー]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⏵ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ 00:00    [C] [⚙️] [⛶]
                                  ↑
                              ここ！
```

設定ボタン（⚙️）や全画面ボタン（⛶）の左側にあります。

### 操作方法

| 操作 | 説明 |
|------|------|
| PIPを閉じる | PIPウィンドウの✕ボタン、または動画を右クリック→「ピクチャーインピクチャーを終了」 |
| チャットを閉じる | チャットウィンドウの✕ボタン |
| PIPのサイズ変更 | PIPウィンドウの角をドラッグ |
| PIPの移動 | PIPウィンドウをドラッグ |

## 技術仕様

- **Manifest Version**: 3
- **対応ブラウザ**: Google Chrome（Manifest V3対応版）
- **動画表示**: ブラウザのネイティブPicture-in-Picture API
- **チャット表示**: YouTubeの公式ポップアウトチャット
- **権限**:
  - `activeTab`: 現在のタブへのアクセス
  - `scripting`: コンテンツスクリプトの実行
  - YouTube.comへのアクセス

## ファイル構成

```
youtube-live-pip/
├── manifest.json          # 拡張機能の設定
├── content.js            # YouTube Live画面に注入されるスクリプト
├── content.css           # カスタムボタンのスタイル
├── background.js         # バックグラウンドスクリプト
├── chat.html            # チャットウィンドウ（予備）
├── pip.html             # PIPウィンドウ（レガシー）
├── pip.js               # PIPウィンドウの機能（レガシー）
├── pip.css              # PIPウィンドウのスタイル（レガシー）
├── icons/               # アイコン画像
│   ├── icon16.png
│   ├── icon48.png
│   └── icon128.png
└── README.md            # このファイル
```

## トラブルシューティング

### ボタンが表示されない
- ページをリロードしてみてください
- 動画プレイヤーにマウスを乗せてコントロールバーを表示させてください
- 拡張機能が有効になっているか `chrome://extensions/` で確認してください

### PIPが開始されない
- 動画が再生中であることを確認してください
- ブラウザがPicture-in-Picture APIをサポートしているか確認してください

### チャットウィンドウが開かない
- ポップアップブロッカーを無効にしてください
- ライブ配信でチャットが有効になっていることを確認してください

### 拡張機能を更新した後
1. `chrome://extensions/` で拡張機能の🔄（再読み込み）ボタンをクリック
2. YouTubeページをリロード（F5）

## 開発

### デバッグ

1. `chrome://extensions/` で拡張機能の「詳細」をクリック
2. 「Service Worker」をクリックしてデベロッパーツールを開く
3. コンソールでエラーを確認

### YouTubeページでのデバッグ

F12でデベロッパーツールを開き、コンソールで確認：

```javascript
// ボタンが追加されているか確認
document.getElementById('youtube-live-pip-button')

// 動画要素を確認
document.querySelector('video')
```

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 貢献

バグ報告や機能リクエストは、GitHubのIssuesでお願いします。

## 免責事項

この拡張機能は非公式のツールです。YouTubeの利用規約を遵守してご利用ください。
